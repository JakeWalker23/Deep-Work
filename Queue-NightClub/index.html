<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Queue Nightclub</title>
    <link rel="stylesheet" type="text/css" media="screen" href="style.css" />
    <link href="https://fonts.googleapis.com/css?family=Lobster|Lobster+Two&display=swap" rel="stylesheet">
        <script src="Queue.js" type="text/javascript"></script>
</head>
<body>
    <div class="title-box">
            <h1 class="club-title">Durley Nightclub</h1>
            <img class="disco-ball" src="/Assets/disco-ball.svg" height="30px" width="30px"/>
    </div>
    <div class="capacity">
        <audio id="music" src="Assets/50Cent.mp3" type="mp3"></audio>
        <h3 class="club-capacity">Club capacity: <span id="Capacity-Variable" value=130>10</span> </h3>
        <h3 class="current-capacity">Current capacity: <span id="currentCapacity">0</span> </h3>
    </div>
    <div class="queue-output" id="queueContents"></div>
    <form class="form">
        <input id="updateField" type="input" class="update-field"></input>
        <input onclick="updateQueue()" id="updateBtn" type="button" value="Add" class="update-btn"></input>
            <br>  
        <input id="removeField" type="input"  class="remove-field"></input>
        <input onclick="removeQueue()" id="removeBtn" type="button" value="Remove" class="remove-btn"></input>
    </form>
<script>
let q = new Queue();
    q.add(3);

let music = document.getElementById("music");
    music.play();

function displayQueue() {
let queueContents = document.getElementById("queueContents");
    queueContents.innerHTML = q.show();
    queueContents.style.fontSize = "25px";
}
displayQueue();

function addQueue(value) {
    q.add(value)
}

function removeQueue(value) {
    q.remove();
}        

// Add the buttons value of the input to the Queue on click
updateBtn.addEventListener("click", function() {
    let val = document.getElementById("updateField").value
        if (val == null) return false;          
    q.add(val);
    document.getElementById("updateField").value = 0;
    capacityVariable = document.getElementById("Capacity-Variable").innerHTML;
let numericalCapacityVariable = parseInt(capacityVariable);
})

// Display the current capacity to the DOM
function currentCapacity() {
let currentCapacity = document.getElementById("currentCapacity");
    currentCapacity.innerHTML = q.size()
    currentCapacity.style.fontFamily = "Lobster";
}
currentCapacity();

// Update the Queue and Capacity every .1s 
    setInterval(currentCapacity, 100)
    setInterval(displayQueue, 100)

// sets the value to 0 after an button click
window.addEventListener("input" , function(e) {
    e.target.value = parseFloat(e.target.value) || 0;
});  
        </script>
    </body>
</html>